{
  InsertQuery<R> insert=create().insertQuery(getTable());
  for (  Field<?> field : getFields()) {
    if (getValue0(field).isChanged()) {
      addValue(insert,(TableField<R,?>)field);
    }
  }
  Identity<R,? extends Number> identity=identity();
  insert.setReturning(identity);
  int result=insert.execute();
  if (identity != null && result > 0) {
    if (insert.getReturned() != null) {
      setValue0(identity.getField(),new Value<Number>(insert.getReturned().getValue(identity.getField())));
    }
 else {
      setValue0(identity.getField(),new Value<Number>(create().lastID(identity)));
    }
  }
  return result;
}
