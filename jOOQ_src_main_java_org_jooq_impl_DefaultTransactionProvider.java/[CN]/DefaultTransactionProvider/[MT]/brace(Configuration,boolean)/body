{
  if (start) {
    connection=provider.acquire();
  }
  try {
    boolean autoCommit=autoCommit(configuration);
    if (autoCommit == true) {
      connection(configuration).setAutoCommit(!start);
    }
  }
  finally {
    if (!start) {
      provider.release(connection);
      connection=null;
      configuration.data().remove(DATA_DEFAULT_TRANSACTION_PROVIDER_CONNECTION);
    }
  }
}
