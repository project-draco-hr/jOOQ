{
  StringBuilder sb=new StringBuilder();
  if (!onDuplicateKeyUpdate) {
    toSQLInsert(configuration,inlineParameters,sb);
  }
 else {
switch (configuration.getDialect()) {
case MYSQL:
{
        toSQLInsert(configuration,inlineParameters,sb);
        sb.append(" on duplicate key update ");
        sb.append(internal(updateMap).toSQLReference(configuration,inlineParameters));
        break;
      }
case H2:
{
    }
case DB2:
case HSQLDB:
case ORACLE:
case SQLSERVER:
case SYBASE:
{
    sb.append(internal(toMerge()).toSQLReference(configuration,inlineParameters));
    break;
  }
default :
throw new SQLDialectNotSupportedException("The ON DUPLICATE KEY UPDATE clause cannot be simulated for " + configuration.getDialect());
}
}
return sb.toString();
}
