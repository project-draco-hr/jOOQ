{
  int result=initialIndex;
  if (!onDuplicateKeyUpdate) {
    result=bindInsert(configuration,stmt,result);
  }
 else {
switch (configuration.getDialect()) {
case MYSQL:
{
        result=bindInsert(configuration,stmt,result);
        break;
      }
case H2:
{
    }
case DB2:
case HSQLDB:
case ORACLE:
case SQLSERVER:
case SYBASE:
{
    result=internal(toMerge()).bindReference(configuration,stmt,result);
    break;
  }
default :
throw new SQLDialectNotSupportedException("The ON DUPLICATE KEY UPDATE clause cannot be simulated for " + configuration.getDialect());
}
}
return result;
}
