{
  Table<Record> nested=create().select(TBook_AUTHOR_ID(),count().as("books")).from(TBook()).groupBy(TBook_AUTHOR_ID()).asTable("nested");
  Result<Record> records=create().select(nested.getFields()).from(nested).orderBy(nested.getField("books"),nested.getField(TBook_AUTHOR_ID())).fetch();
  assertEquals(2,records.size());
  assertEquals(Integer.valueOf(1),records.getValue(0,nested.getField(TBook_AUTHOR_ID())));
  assertEquals(Integer.valueOf(2),records.getValue(0,nested.getField("books")));
  assertEquals(Integer.valueOf(2),records.getValue(1,nested.getField(TBook_AUTHOR_ID())));
  assertEquals(Integer.valueOf(2),records.getValue(1,nested.getField("books")));
}
