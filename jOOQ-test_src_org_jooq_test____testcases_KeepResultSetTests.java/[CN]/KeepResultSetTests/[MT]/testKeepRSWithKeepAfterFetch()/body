{
switch (dialect()) {
case SQLITE:
    log.info("SKIPPING","KeepResultSet tests");
  return;
}
Result<Record> b2=create().select().from(TBook().getName()).keepResultSet(KEEP_AFTER_FETCH).fetch();
Record r=b2.get(0);
assertNotNull(b2.resultSet());
assertNotNull(r.resultSet());
testFailUpdateRow(b2.resultSet());
r.setValue(TBook_TITLE(),"XX");
assertEquals("XX",r.getValue(TBook_TITLE()));
assertTrue(r.changed());
assertFalse(r.original().equals(r));
assertEquals(BOOK_TITLES.get(0),getBook(1).getValue(TBook_TITLE()));
r.refresh();
assertEquals("1984",r.getValue(TBook_TITLE()));
assertFalse(r.changed());
assertEquals(r.original(),r);
b2.close();
assertNull(b2.resultSet());
Cursor<Record> c1=create().select().from(TBook().getName()).keepResultSet(KEEP_AFTER_FETCH).fetchLazy();
assertFalse(c1.closesAfterFetch());
while (c1.hasNext()) {
Result<Record> result=c1.fetch(1);
assertNotNull(result.get(0).resultSet());
assertNotNull(result.resultSet());
assertNotNull(c1.resultSet());
}
assertNotNull(c1.resultSet());
c1.close();
assertNull(c1.resultSet());
}
