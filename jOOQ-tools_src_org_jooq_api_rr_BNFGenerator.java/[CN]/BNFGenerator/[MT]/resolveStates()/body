{
  for (  Class<?> type : visited) {
    State state=type.getAnnotation(State.class);
    if (state != null) {
      String stateName=state.name();
      if ("".equals(stateName)) {
        stateName=type.getSimpleName();
      }
      if (notEmpty(state.aliases())) {
        for (        String alias : state.aliases()) {
          edge(new Edge(new Path(alias,stateName)));
          if (state.terminal()) {
            terminals.add(alias);
          }
        }
      }
      if (state.terminal()) {
        terminals.add(stateName);
      }
      for (      Class<?> superType : type.getInterfaces()) {
        State superState=superType.getAnnotation(State.class);
        if (superState != null) {
          String superStateName=superState.name();
          if ("".equals(superStateName)) {
            superStateName=superType.getSimpleName();
          }
          edge(new Edge(new Path(stateName,superStateName)));
        }
      }
    }
  }
}
