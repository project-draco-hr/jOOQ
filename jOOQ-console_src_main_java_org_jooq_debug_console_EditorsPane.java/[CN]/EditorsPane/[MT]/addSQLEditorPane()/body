{
  isAdjusting=true;
  int index=editorTabbedPane.getTabCount() - 1;
  final EditorPane sqlEditorPane=new EditorPane(statementExecutorCreator);
  sqlEditorPane.setBorder(BorderFactory.createEmptyBorder(2,5,0,5));
  String title="Context " + contextCount++;
  editorTabbedPane.insertTab(title,null,sqlEditorPane,null,index);
  final JPanel tabComponent=new JPanel(new BorderLayout());
  tabComponent.setOpaque(false);
  tabComponent.add(new JLabel(title),BorderLayout.CENTER);
  final JLabel closeLabel=new JLabel(new ImageIcon(getClass().getResource("/org/jooq/debug/console/resources/TabCloseInactive14.png")));
  closeLabel.setBorder(BorderFactory.createEmptyBorder(0,2,0,0));
  closeLabel.addMouseListener(new MouseAdapter(){
    @Override public void mouseReleased(    MouseEvent e){
      if (!closeLabel.contains(e.getPoint())) {
        return;
      }
      isAdjusting=true;
      if (editorTabbedPane.getTabCount() > 2) {
        for (int i=editorTabbedPane.getTabCount() - 1; i >= 0; i--) {
          if (editorTabbedPane.getTabComponentAt(i) == tabComponent) {
            ((EditorPane)editorTabbedPane.getComponentAt(i)).closeLastExecution();
            editorTabbedPane.removeTabAt(i);
            if (i == editorTabbedPane.getTabCount() - 1) {
              editorTabbedPane.setSelectedIndex(i - 1);
            }
            break;
          }
        }
      }
      isAdjusting=false;
    }
    @Override public void mouseEntered(    MouseEvent e){
      if (editorTabbedPane.getTabCount() > 2) {
        closeLabel.setIcon(new ImageIcon(getClass().getResource("/org/jooq/debug/console/resources/TabCloseActive14.png")));
      }
    }
    @Override public void mouseExited(    MouseEvent e){
      closeLabel.setIcon(new ImageIcon(getClass().getResource("/org/jooq/debug/console/resources/TabCloseInactive14.png")));
    }
  }
);
  editorTabbedPane.addChangeListener(new ChangeListener(){
    @Override public void stateChanged(    ChangeEvent e){
      int selectedIndex=editorTabbedPane.getSelectedIndex();
      Component tabComponent2=editorTabbedPane.getTabComponentAt(selectedIndex);
      closeLabel.setVisible(tabComponent2 == tabComponent && editorTabbedPane.getTabCount() > 2);
    }
  }
);
  tabComponent.add(closeLabel,BorderLayout.EAST);
  editorTabbedPane.setTabComponentAt(index,tabComponent);
  editorTabbedPane.setSelectedIndex(index);
  isAdjusting=false;
  sqlEditorPane.adjustDefaultFocus();
}
