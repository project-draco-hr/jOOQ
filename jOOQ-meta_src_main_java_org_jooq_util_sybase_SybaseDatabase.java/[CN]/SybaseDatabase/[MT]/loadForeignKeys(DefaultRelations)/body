{
  Sysidx fkIndex=SYSIDX.as("fkIndex");
  Sysidx ukIndex=SYSIDX.as("ukIndex");
  Systable fkTable=SYSTABLE.as("fkTable");
  Systable ukTable=SYSTABLE.as("ukTable");
  for (  Record record : create().select(concat(fkTable.TABLE_NAME,val("__"),fkIndex.INDEX_NAME).as("fkIndexName"),fkTable.TABLE_NAME,SYSTABCOL.COLUMN_NAME,concat(ukTable.TABLE_NAME,val("__"),ukIndex.INDEX_NAME).as("ukIndexName")).from(SYSFKEY).join(fkIndex).on(SYSFKEY.FOREIGN_INDEX_ID.equal(fkIndex.INDEX_ID)).and(SYSFKEY.FOREIGN_TABLE_ID.equal(fkIndex.TABLE_ID)).join(SYSIDXCOL).on(fkIndex.INDEX_ID.equal(SYSIDXCOL.INDEX_ID)).and(fkIndex.TABLE_ID.equal(SYSIDXCOL.TABLE_ID)).join(fkTable).on(SYSFKEY.FOREIGN_TABLE_ID.equal(fkTable.TABLE_ID)).join(SYSTABCOL).on(SYSIDXCOL.TABLE_ID.equal(SYSTABCOL.TABLE_ID)).and(SYSIDXCOL.COLUMN_ID.equal(SYSTABCOL.COLUMN_ID)).join(ukIndex).on(SYSFKEY.PRIMARY_INDEX_ID.equal(ukIndex.INDEX_ID)).and(SYSFKEY.PRIMARY_TABLE_ID.equal(ukIndex.TABLE_ID)).join(ukTable).on(SYSFKEY.PRIMARY_TABLE_ID.equal(ukTable.TABLE_ID)).orderBy(fkTable.TABLE_NAME.asc(),fkIndex.INDEX_NAME.asc(),SYSIDXCOL.SEQUENCE.asc()).fetch()) {
    String foreignKey=record.getValueAsString("fkIndexName");
    String foreignKeyTableName=record.getValue(SYSTABLE.TABLE_NAME);
    String foreignKeyColumn=record.getValue(SYSTABCOL.COLUMN_NAME);
    String referencedKey=record.getValueAsString("ukIndexName");
    TableDefinition foreignKeyTable=getTable(getSchema(),foreignKeyTableName);
    if (foreignKeyTable != null) {
      ColumnDefinition referencingColumn=foreignKeyTable.getColumn(foreignKeyColumn);
      relations.addForeignKey(foreignKey,referencedKey,referencingColumn,getSchema());
    }
  }
}
