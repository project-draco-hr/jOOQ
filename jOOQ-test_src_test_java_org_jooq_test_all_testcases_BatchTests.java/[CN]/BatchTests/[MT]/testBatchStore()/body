{
  jOOQAbstractTest.reset=false;
  A a1=create().newRecord(TAuthor());
  a1.setValue(TAuthor_ID(),8);
  a1.setValue(TAuthor_LAST_NAME(),"XX");
  A a2=create().newRecord(TAuthor());
  a2.setValue(TAuthor_ID(),9);
  a2.setValue(TAuthor_LAST_NAME(),"YY");
  B b1=create().newRecord(TBook());
  b1.setValue(TBook_ID(),80);
  b1.setValue(TBook_AUTHOR_ID(),8);
  b1.setValue(TBook_TITLE(),"XX 1");
  b1.setValue(TBook_PUBLISHED_IN(),2000);
  b1.setValue(TBook_LANGUAGE_ID(),1);
  Batch batch=create().batchStore(a1,b1,a2);
  assertEquals(3,batch.size());
  int[] result1=batch.execute();
  assertEquals(3,result1.length);
  testBatchAuthors("XX","YY");
  assertEquals("XX 1",create().select(TBook_TITLE()).from(TBook()).where(TBook_ID().equal(80)).fetchOne(0));
  a2.setValue(TAuthor_LAST_NAME(),"ABC");
  A a3=create().newRecord(TAuthor());
  a3.setValue(TAuthor_ID(),10);
  a3.setValue(TAuthor_LAST_NAME(),"ZZ");
  int[] result2=create().batchStore(b1,a1,a2,a3).execute();
  assertEquals(2,result2.length);
  testBatchAuthors("XX","ABC","ZZ");
  assertEquals("XX 1",create().select(TBook_TITLE()).from(TBook()).where(TBook_ID().equal(80)).fetchOne(0));
}
