{
  StringBuilder sb=new StringBuilder();
switch (configuration.getDialect()) {
case ORACLE:
{
      sb.append("table(");
      sb.append(internal(array).toSQLReference(configuration,inlineParameters));
      sb.append(")");
      break;
    }
case H2:
{
    sb.append("table(COLUMN_VALUE ");
    if (array.getDataType().getType() == Object[].class) {
      sb.append(H2DataType.VARCHAR.getTypeName());
    }
 else {
      sb.append(array.getDataType().getTypeName());
    }
    sb.append(" = ");
    sb.append(internal(array).toSQLReference(configuration,inlineParameters));
    sb.append(")");
    break;
  }
case HSQLDB:
case POSTGRES:
{
  sb.append("unnest(");
  sb.append(internal(array).toSQLReference(configuration,inlineParameters));
  sb.append(") ARRAY_TABLE(COLUMN_VALUE)");
  break;
}
default :
throw new SQLDialectNotSupportedException("ARRAY TABLE is not supported for " + configuration.getDialect());
}
return sb.toString();
}
