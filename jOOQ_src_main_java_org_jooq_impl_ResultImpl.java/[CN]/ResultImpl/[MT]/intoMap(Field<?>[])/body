{
  if (keys == null) {
    keys=new Field[0];
  }
  Map<Record,R> map=new LinkedHashMap<Record,R>();
  FieldList keyList=new FieldList(keys);
  for (  R record : this) {
    Record key=new RecordImpl(keyList);
    for (    Field<?> field : keys) {
      Util.setValue(key,field,record,field);
    }
    if (map.put(key,record) != null) {
      throw new InvalidResultException("Key list " + keyList + " is not unique in Result for "+ this);
    }
  }
  return map;
}
