{
  if (cleanUpThread != null) {
    return;
  }
  cleanUpThread=new Thread("Registry cleanup thread"){
    @Override public void run(){
      while (true) {
        try {
          sleep(5000);
        }
 catch (        Exception e) {
        }
synchronized (ObjectRegistry.this) {
          for (          Integer instanceID : instanceIDToObjectReferenceMap.keySet().toArray(new Integer[0])) {
            if (instanceIDToObjectReferenceMap.get(instanceID).get() == null) {
              instanceIDToObjectReferenceMap.remove(instanceID);
            }
          }
          if (instanceIDToObjectReferenceMap.isEmpty()) {
            cleanUpThread=null;
            return;
          }
        }
      }
    }
  }
;
  cleanUpThread.setDaemon(true);
  cleanUpThread.start();
}
