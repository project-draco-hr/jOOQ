{
  this.configuration=configuration;
  this.data=new HashMap<Object,Object>();
  this.visitClauses=new ArrayDeque<Clause>();
  VisitListenerProvider[] providers=configuration.visitListenerProviders();
  this.visitListeners=new VisitListener[providers.length + 1];
  this.visitContext=new DefaultVisitContext();
  this.visitParts=new ArrayDeque<QueryPart>();
  for (int i=0; i < providers.length; i++) {
    this.visitListeners[i]=providers[i].provide();
  }
  this.visitListeners[providers.length]=new InternalVisitListener();
}
