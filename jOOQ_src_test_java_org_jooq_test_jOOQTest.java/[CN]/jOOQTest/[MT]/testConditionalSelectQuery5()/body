{
  SelectQuery q=create.selectQuery();
  Condition c1=create.condition("\"TABLE1\".\"ID1\" = ?","10");
  Condition c2=create.condition("\"TABLE2\".\"ID2\" = 20 or \"TABLE2\".\"ID2\" = ?",30);
  q.addConditions(c1);
  q.addConditions(c2);
  assertEquals("select 1 from dual where ((\"TABLE1\".\"ID1\" = '10') and (\"TABLE2\".\"ID2\" = 20 or \"TABLE2\".\"ID2\" = 30))",internal(q).toSQLReference(create,true));
  assertEquals("select 1 from dual where ((\"TABLE1\".\"ID1\" = ?) and (\"TABLE2\".\"ID2\" = 20 or \"TABLE2\".\"ID2\" = ?))",internal(q).toSQLReference(create,false));
  assertEquals(q,create.select().where(c1,c2));
  context.checking(new Expectations(){
{
      oneOf(statement).setString(1,"10");
      oneOf(statement).setInt(2,30);
    }
  }
);
  int i=internal(q).bindReference(create,statement);
  assertEquals(3,i);
  context.assertIsSatisfied();
}
