{
  if (!renderSchema())   return null;
  Schema result=schema;
  if (result != null) {
    String schemaName=result.getName();
    if (!StringUtils.isEmpty(schemaName)) {
      if (!mapping().getSchemata().isEmpty()) {
        if (!getSchemata().containsKey(schemaName)) {
synchronized (this) {
            if (!getSchemata().containsKey(schemaName)) {
              for (              MappedSchema s : mapping().getSchemata()) {
                if (schemaName.equals(s.getInput())) {
                  if (!isBlank(s.getOutput()) && !s.getOutput().equals(s.getInput())) {
                    result=new RenamedSchema(result,s.getOutput());
                  }
                  break;
                }
              }
              getSchemata().put(schemaName,result);
            }
          }
        }
        result=getSchemata().get(schemaName);
      }
      if (result.getName().equals(mapping().getDefaultSchema())) {
        result=null;
      }
    }
  }
  return result;
}
