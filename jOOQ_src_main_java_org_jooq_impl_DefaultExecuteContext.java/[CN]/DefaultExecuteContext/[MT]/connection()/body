{
  ConnectionProvider provider=connectionProvider != null ? connectionProvider : getConnectionProvider();
  if (provider != null) {
    Connection connection=provider.acquire();
    if (connection != null) {
      return new ConnectionProxy(new DataSourceConnection(provider,connection),getSettings());
    }
  }
  return null;
}
