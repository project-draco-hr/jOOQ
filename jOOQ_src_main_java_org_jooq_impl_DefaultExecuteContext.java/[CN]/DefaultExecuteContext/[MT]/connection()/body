{
  ConnectionProvider provider=connectionProvider != null ? connectionProvider : getConnectionProvider();
  if (provider != null) {
    Connection connection=provider.acquire();
    if (connection != null) {
      return new SettingsEnabledConnection(new ProviderEnabledConnection(provider,connection),getSettings());
    }
  }
  return null;
}
