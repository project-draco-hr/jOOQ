{
  List<Query> queries=new ArrayList<Query>();
  QueryCollector collector=new QueryCollector();
  try {
    configuration.getExecuteListeners().add(collector);
    for (int i=0; i < records.length; i++) {
      Configuration previous=((AttachableInternal)records[i]).getConfiguration();
      try {
        records[i].attach(configuration);
        executeAction(i);
      }
 catch (      QueryCollectorException e) {
        Query query=e.getQuery();
        if (query.isExecutable()) {
          queries.add(query);
        }
      }
 finally {
        records[i].attach(previous);
      }
    }
  }
  finally {
    configuration.getExecuteListeners().remove(collector);
  }
  int[] result=create.batch(queries).execute();
  updateChangedFlag();
  return result;
}
