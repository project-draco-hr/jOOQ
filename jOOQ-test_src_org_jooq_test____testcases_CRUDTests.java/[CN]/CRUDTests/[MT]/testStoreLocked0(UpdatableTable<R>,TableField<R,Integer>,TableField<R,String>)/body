{
  R record1=create().fetchOne(table,id.equal(1));
  assertEquals(0,record1.storeLocked());
  assertEquals(0,record1.storeLocked());
  record1.setValue(string,"New Title 1");
  assertEquals(1,record1.storeLocked());
  assertEquals("New Title 1",create().fetchOne(table,id.equal(1)).getValue(string));
  R record2=create().fetchOne(table,id.equal(1));
  R record3=create().fetchOne(table,id.equal(1));
  record2.setValue(string,"New Title 2");
  assertEquals(1,record2.storeLocked());
  assertEquals("New Title 2",create().fetchOne(table,id.equal(1)).getValue(string));
  assertEquals(0,record3.storeLocked());
  record3.setValue(string,"New Title 3");
  try {
    record3.storeLocked();
    fail();
  }
 catch (  DataChangedException expected) {
  }
  assertEquals("New Title 2",create().fetchOne(table,id.equal(1)).getValue(string));
  record3.refresh();
  record3.setValue(string,"New Title 3");
  assertEquals(1,record3.storeLocked());
  assertEquals("New Title 3",create().fetchOne(table,id.equal(1)).getValue(string));
  R record4=create().fetchOne(table,id.equal(1));
  R record5=create().fetchOne(table,id.equal(1));
  assertEquals(1,record4.deleteLocked());
  assertEquals(0,record5.storeLocked());
  record5.setValue(string,"New Title 5");
  try {
    record5.storeLocked();
    fail();
  }
 catch (  DataChangedException expected) {
  }
  assertEquals(1,record4.storeLocked());
  assertEquals(1,record5.storeLocked());
  assertEquals("New Title 5",create().fetchOne(table,id.equal(1)).getValue(string));
  try {
    record4.deleteLocked();
    fail();
  }
 catch (  DataChangedException expected) {
  }
  record4.refresh();
  assertEquals(1,record4.deleteLocked());
  try {
    record5.deleteLocked();
    fail();
  }
 catch (  DataChangedException expected) {
  }
}
