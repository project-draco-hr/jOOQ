{
  try {
    R result=Utils.newRecord(table,getConfiguration());
    for (    Field<?> targetField : table.getFields()) {
      Field<?> sourceField=getField(targetField);
      if (sourceField != null) {
        Utils.setValue(result,targetField,this,sourceField);
      }
    }
    if (result instanceof AbstractRecord) {
      UniqueKey<?> key=((AbstractRecord)result).getMainKey();
      if (key != null) {
        boolean isKeySet=true;
        for (        Field<?> field : key.getFields()) {
          isKeySet&=(getField(field) != null);
        }
        if (isKeySet) {
          ((AbstractRecord)result).setAllChanged(false);
        }
      }
    }
    return result;
  }
 catch (  Exception e) {
    throw new MappingException("An error ocurred when mapping record to " + table,e);
  }
}
