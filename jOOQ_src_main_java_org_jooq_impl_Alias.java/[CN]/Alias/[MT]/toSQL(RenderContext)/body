{
  if (context.declareFields() || context.declareTables()) {
    if (asList(CUBRID,FIREBIRD,SQLSERVER,SYBASE).contains(context.getDialect()) && fieldAliases != null && wrapped instanceof TableImpl) {
      context.keyword("(select * from ").sql(wrapped).sql(")");
    }
 else {
      if (wrapInParentheses) {
        context.sql("(");
      }
      context.sql(wrapped);
      if (wrapInParentheses) {
        context.sql(")");
      }
    }
    if (asList(DERBY,HSQLDB,MYSQL,POSTGRES).contains(context.getDialect())) {
      context.keyword(" as");
    }
    context.sql(" ");
    context.literal(alias);
    if (fieldAliases != null) {
      String separator="";
      context.sql("(");
      for (int i=0; i < fieldAliases.length; i++) {
        context.sql(separator);
        context.literal(fieldAliases[i]);
        separator=", ";
      }
      context.sql(")");
    }
 else {
switch (context.getDialect()) {
case HSQLDB:
case POSTGRES:
{
          Object o=wrapped;
          if (context.declareTables() && o instanceof ArrayTable) {
            ArrayTable table=(ArrayTable)o;
            context.sql("(");
            Utils.fieldNames(context,table.getFields());
            context.sql(")");
          }
          break;
        }
    }
  }
}
 else {
  context.literal(alias);
}
}
