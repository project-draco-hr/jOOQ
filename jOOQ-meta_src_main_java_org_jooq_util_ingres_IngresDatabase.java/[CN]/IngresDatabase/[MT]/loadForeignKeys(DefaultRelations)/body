{
  Result<Record> result=create().select(trim(IirefConstraints.REF_SCHEMA_NAME),trim(IirefConstraints.REF_CONSTRAINT_NAME),trim(IirefConstraints.UNIQUE_CONSTRAINT_NAME),trim(IirefConstraints.UNIQUE_SCHEMA_NAME),trim(IirefConstraints.REF_TABLE_NAME),trim(IiindexColumns.COLUMN_NAME)).from(IICONSTRAINTS).join(IIREF_CONSTRAINTS).on(Iiconstraints.CONSTRAINT_NAME.equal(IirefConstraints.REF_CONSTRAINT_NAME)).and(Iiconstraints.SCHEMA_NAME.equal(IirefConstraints.REF_SCHEMA_NAME)).join(IICONSTRAINT_INDEXES).on(Iiconstraints.CONSTRAINT_NAME.equal(IiconstraintIndexes.CONSTRAINT_NAME)).and(Iiconstraints.SCHEMA_NAME.equal(IiconstraintIndexes.SCHEMA_NAME)).join(IIINDEXES).on(IiconstraintIndexes.INDEX_NAME.equal(Iiindexes.INDEX_NAME)).and(IiconstraintIndexes.SCHEMA_NAME.equal(Iiindexes.INDEX_OWNER)).join(IIINDEX_COLUMNS).on(Iiindexes.INDEX_NAME.equal(IiindexColumns.INDEX_NAME)).and(Iiindexes.INDEX_OWNER.equal(IiindexColumns.INDEX_OWNER)).where(IirefConstraints.REF_SCHEMA_NAME.in(getInputSchemata())).and(Iiconstraints.CONSTRAINT_TYPE.equal("R")).orderBy(IirefConstraints.REF_SCHEMA_NAME.asc(),IirefConstraints.REF_TABLE_NAME.asc(),IirefConstraints.REF_CONSTRAINT_NAME.asc(),IiindexColumns.KEY_SEQUENCE.asc()).fetch();
  for (  Record record : result) {
    SchemaDefinition foreignKeySchema=getSchema(record.getValue(trim(IirefConstraints.REF_SCHEMA_NAME)));
    SchemaDefinition uniqueKeySchema=getSchema(record.getValue(trim(IirefConstraints.UNIQUE_SCHEMA_NAME)));
    String foreignKey=record.getValue(trim(IirefConstraints.REF_CONSTRAINT_NAME));
    String foreignKeyTable=record.getValue(trim(IirefConstraints.REF_TABLE_NAME));
    String foreignKeyColumn=record.getValue(trim(IiindexColumns.COLUMN_NAME));
    String uniqueKey=record.getValue(trim(IirefConstraints.UNIQUE_CONSTRAINT_NAME));
    TableDefinition referencingTable=getTable(foreignKeySchema,foreignKeyTable);
    if (referencingTable != null) {
      ColumnDefinition referencingColumn=referencingTable.getColumn(foreignKeyColumn);
      relations.addForeignKey(foreignKey,uniqueKey,referencingColumn,uniqueKeySchema);
    }
  }
}
