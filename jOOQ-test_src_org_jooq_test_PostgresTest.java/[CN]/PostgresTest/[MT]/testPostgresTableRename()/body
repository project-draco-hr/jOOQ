{
  Name b1=name("b1");
  Name b2=name("b2");
  String create="create or replace view {0} as select * from {1} where {2} = {3}";
  String drop="drop view if exists {0}";
  try {
    create().execute(create,b1,T_BOOK,T_BOOK.ID,inline(1));
    create().execute(create,b2,T_BOOK,T_BOOK.ID,inline(2));
    org.jooq.test.postgres.generatedclasses.tables.TBook book1=T_BOOK.rename("b1");
    org.jooq.test.postgres.generatedclasses.tables.TBook book2=T_BOOK.rename("b2");
    org.jooq.test.postgres.generatedclasses.tables.TBook x1=book1.as("x1");
    org.jooq.test.postgres.generatedclasses.tables.TBook x2=book2.as("x2");
    assertEquals(2,create().select().from(book1).union(select().from(book2)).fetchCount());
    assertEquals(asList(1,2),create().select().from(select(book1.ID).from(book1).union(select(book2.ID).from(book2))).orderBy(1).fetch(0,int.class));
    assertEquals(asList(1,2),create().select().from(select(x1.ID).from(x1).union(select(x2.ID).from(x2))).orderBy(1).fetch(0,int.class));
  }
  finally {
    create().execute(drop,b1);
    create().execute(drop,b2);
  }
}
