{
  R record=null;
  try {
    if (!isClosed && rs.next()) {
      ctx.record(null);
      listener.recordStart(ctx);
      record=Util.newRecord(type,fields,ctx.configuration());
      final List<Field<?>> fieldList=fields.getFields();
      final int size=fieldList.size();
      for (int i=0; i < size; i++) {
        setValue((AbstractRecord)record,fieldList.get(i),i);
      }
      ctx.record(record);
      listener.recordEnd(ctx);
    }
  }
 catch (  SQLException e) {
    throw Util.translate("Cursor.fetch",ctx.sql(),e);
  }
  if (record == null) {
    CursorImpl.this.close();
  }
  return record;
}
