{
  if (resultSetConcurrency != 0 || resultSetType != 0 || resultSetHoldability != 0) {
    int type=resultSetType != 0 ? resultSetType : ResultSet.TYPE_FORWARD_ONLY;
    int concurrency=resultSetConcurrency != 0 ? resultSetConcurrency : ResultSet.CONCUR_READ_ONLY;
    if (resultSetHoldability == 0) {
      ctx.statement(ctx.connection().prepareStatement(ctx.sql(),type,concurrency));
    }
 else {
      ctx.statement(ctx.connection().prepareStatement(ctx.sql(),type,concurrency,resultSetHoldability));
    }
  }
 else   if (keepResultSetMode == KEEP_AFTER_FETCH) {
    ctx.statement(ctx.connection().prepareStatement(ctx.sql(),TYPE_SCROLL_SENSITIVE,CONCUR_READ_ONLY));
  }
 else   if (keepResultSetMode == UPDATE_ON_CHANGE || keepResultSetMode == UPDATE_ON_STORE) {
    ctx.statement(ctx.connection().prepareStatement(ctx.sql(),TYPE_SCROLL_SENSITIVE,CONCUR_UPDATABLE));
  }
 else   if (isForUpdate() && asList(CUBRID,SQLSERVER).contains(ctx.configuration().dialect())) {
    ctx.data(DATA_LOCK_ROWS_FOR_UPDATE,true);
    ctx.statement(ctx.connection().prepareStatement(ctx.sql(),TYPE_SCROLL_SENSITIVE,CONCUR_UPDATABLE));
  }
 else {
    ctx.statement(ctx.connection().prepareStatement(ctx.sql()));
  }
  if (size != 0) {
    if (log.isDebugEnabled())     log.debug("Setting fetch size",size);
    ctx.statement().setFetchSize(size);
  }
  if (maxRows != 0) {
    ctx.statement().setMaxRows(maxRows);
  }
}
