{
  TableField<R,?>[] keys=getMainKey().getFieldsArray();
  try {
    DeleteQuery<R> delete1=create().deleteQuery(getTable());
    Utils.addConditions(delete1,this,keys);
    if (isExecuteWithOptimisticLocking()) {
      if (isTimestampOrVersionAvailable()) {
        addConditionForVersionAndTimestamp(delete1);
      }
 else {
        checkIfChanged(keys);
      }
    }
    int result=delete1.execute();
    checkIfChanged(result,null,null);
    return result;
  }
  finally {
    changed(true);
  }
}
