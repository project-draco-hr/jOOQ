{
  StopWatch watch=new StopWatch();
  CallableStatement statement=null;
  try {
    results=new HashMap<Parameter<?>,Object>();
    Configuration configuration=attachable.getConfiguration();
    Connection connection=configuration.getConnection();
    String sql=toSQLReference(configuration);
    watch.splitTrace("SQL rendered");
    if (log.isDebugEnabled())     log.debug("Executing query",toSQLReference(configuration,true));
    if (log.isTraceEnabled())     log.trace("Preparing statement",sql);
    statement=connection.prepareCall(sql);
    watch.splitTrace("Statement prepared");
    bindReference(configuration,statement);
    watch.splitTrace("Variables bound");
    registerOutParameters(configuration,statement);
    watch.splitTrace("OUT params registered");
    boolean autoCommit=connection.getAutoCommit();
    if (autoCommit && configuration.getDialect() == SQLDialect.POSTGRES) {
      connection.setAutoCommit(false);
    }
    statement.execute();
    if (autoCommit && configuration.getDialect() == SQLDialect.POSTGRES) {
      connection.setAutoCommit(autoCommit);
    }
    watch.splitTrace("Procedure called");
    fetchOutParameters(configuration,statement);
    watch.splitTrace("OUT params fetched");
    return 0;
  }
  finally {
    JooqUtil.safeClose(statement);
    watch.splitDebug("Procedure executed");
  }
}
