{
  super(new BorderLayout());
  this.databaseDescriptor=databaseDescriptor;
  this.isDBEditable=!databaseDescriptor.isReadOnly();
  setOpaque(false);
  JPanel northPanel=new JPanel(new BorderLayout());
  northPanel.setOpaque(false);
  JToolBar northWestPanel=new JToolBar();
  northWestPanel.setOpaque(false);
  northWestPanel.setFloatable(false);
  startButton=new JButton(new ImageIcon(getClass().getResource("/org/jooq/debug/console/resources/Play16.png")));
  startButton.setOpaque(false);
  startButton.setFocusable(false);
  startButton.setToolTipText("Run the (selected) text (F5)");
  startButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      evaluateInternal();
    }
  }
);
  northWestPanel.add(startButton);
  stopButton=new JButton(new ImageIcon(getClass().getResource("/org/jooq/debug/console/resources/Stop16.png")));
  stopButton.setVisible(false);
  stopButton.setOpaque(false);
  stopButton.setFocusable(false);
  stopButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      evaluationThread=null;
      closeConnection();
    }
  }
);
  northWestPanel.add(stopButton);
  northPanel.add(northWestPanel,BorderLayout.WEST);
  JPanel northEastPanel=new JPanel(new FlowLayout(FlowLayout.CENTER,5,2));
  northEastPanel.setOpaque(false);
  JCheckBox limitCheckBox=new JCheckBox("Parse 10000 rows max",isUsingMaxRowCount);
  limitCheckBox.addItemListener(new ItemListener(){
    @Override public void itemStateChanged(    ItemEvent e){
      isUsingMaxRowCount=e.getStateChange() == ItemEvent.SELECTED;
    }
  }
);
  limitCheckBox.setOpaque(false);
  northEastPanel.add(limitCheckBox);
  northEastPanel.add(Box.createHorizontalStrut(5));
  northEastPanel.add(new JLabel("No display when rows >"));
  NumberFormat numberFormat=NumberFormat.getIntegerInstance();
  displayedRowCountField=new JFormattedTextField(numberFormat);
  displayedRowCountField.setHorizontalAlignment(JFormattedTextField.RIGHT);
  displayedRowCountField.setValue(100000);
  displayedRowCountField.setColumns(7);
  northEastPanel.add(displayedRowCountField);
  northPanel.add(northEastPanel,BorderLayout.CENTER);
  add(northPanel,BorderLayout.NORTH);
  editorTextArea=new SqlTextArea();
  editorTextArea.addKeyListener(new KeyAdapter(){
    @Override public void keyPressed(    KeyEvent e){
      boolean isControlDown=e.isControlDown();
switch (e.getKeyCode()) {
case KeyEvent.VK_SPACE:
        if (isControlDown) {
          showCompletion();
        }
      break;
case KeyEvent.VK_F5:
    if (startButton.isVisible()) {
      evaluateInternal();
    }
  break;
case KeyEvent.VK_ESCAPE:
new Thread("SQLConsole - Interruption"){
  @Override public void run(){
    if (evaluationThread != null) {
      evaluationThread=null;
      closeConnection();
    }
  }
}
.start();
break;
}
}
}
);
RTextScrollPane editorTextAreaScrollPane=new RTextScrollPane(editorTextArea);
JSplitPane verticalSplitPane=new JSplitPane(JSplitPane.VERTICAL_SPLIT,true,editorTextAreaScrollPane,southPanel);
add(verticalSplitPane,BorderLayout.CENTER);
verticalSplitPane.setDividerLocation(150);
}
