{
  if (IS_SYNCING_MESSAGES) {
    syncSend(message);
  }
 else {
    checkOpen();
    if (message instanceof LocalMessage) {
      LocalMessage<?> localMessage=(LocalMessage<?>)message;
      localMessage.runCommand(new MessageContext(this));
      return;
    }
    messagingInterface.asyncSend(message);
  }
}
