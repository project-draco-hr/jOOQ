{
  if (!connectionInitialised) {
    connectionInitialised=true;
    connection=getConnection0(null,null);
    final Connection c=connection;
    if (false)     connection=new MockConnection(new MockDataProvider(){
      @Override public MockResult[] execute(      MockExecuteContext context) throws SQLException {
        DSLContext executor=DSL.using(c,getDialect());
        if (context.batchSingle()) {
          Query query=executor.query(context.sql(),new Object[context.batchBindings()[0].length]);
          int[] result=executor.batch(query).bind(context.batchBindings()).execute();
          MockResult[] r=new MockResult[result.length];
          for (int i=0; i < r.length; i++) {
            r[i]=new MockResult(result[i],null);
          }
          return r;
        }
 else         if (context.batchMultiple()) {
          List<Query> queries=new ArrayList<Query>();
          for (          String sql : context.batchSQL()) {
            queries.add(executor.query(sql));
          }
          int[] result=executor.batch(queries).execute();
          MockResult[] r=new MockResult[result.length];
          for (int i=0; i < r.length; i++) {
            r[i]=new MockResult(result[i],null);
          }
          return r;
        }
 else         if (context.sql().toLowerCase().matches("(?s:\\W*(select|with).*)")) {
          List<Result<Record>> result=executor.fetchMany(context.sql(),context.bindings());
          MockResult[] r=new MockResult[result.size()];
          for (int i=0; i < result.size(); i++) {
            r[i]=new MockResult(result.get(i).size(),result.get(i));
          }
          return r;
        }
 else {
          int result=executor.execute(context.sql(),context.bindings());
          MockResult[] r=new MockResult[1];
          r[0]=new MockResult(result,null);
          return r;
        }
      }
    }
);
  }
  return connection;
}
