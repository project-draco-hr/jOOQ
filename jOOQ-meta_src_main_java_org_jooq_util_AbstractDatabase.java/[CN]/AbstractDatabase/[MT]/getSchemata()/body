{
  if (schemata == null) {
    schemata=new ArrayList<SchemaDefinition>();
    try {
      schemata=getSchemata0();
    }
 catch (    Exception e) {
      log.error("Could not load schemata",e);
    }
    Iterator<SchemaDefinition> it=schemata.iterator();
    while (it.hasNext()) {
      SchemaDefinition schema=it.next();
      if (!getInputSchemata().contains(schema.getName())) {
        it.remove();
      }
 else       if (!includeEmptySchemas() && getArrays(schema).isEmpty() && getEnums(schema).isEmpty()&& getPackages(schema).isEmpty()&& getRoutines(schema).isEmpty()&& getTables(schema).isEmpty()&& getUDTs(schema).isEmpty()) {
        log.info("Excluding empty schema",schema);
        it.remove();
      }
    }
    if (schemata.isEmpty())     log.warn("No schemata were loaded","Please check your connection settings, and whether your database (and your database version!) is really supported by jOOQ. Also, check the case-sensitivity in your configured <inputSchema/> elements : " + inputSchemata);
  }
  return schemata;
}
