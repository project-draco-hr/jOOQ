{
  StringBuilder stringSB=new StringBuilder();
  StringBuilder htmlSB=new StringBuilder();
  htmlSB.append("<html>\n<body>\n<table>\n");
  htmlSB.append("<tr>" + "<th>Thread name</th>" + "<th>Thread ID</th>"+ "<th>Timestamp</th>"+ "<th>Exec time (ms)</th>"+ "<th>RS lifetime (ms)</th>"+ "<th>RS read</th>"+ "<th>RS rows read</th>"+ "<th>Query</th>"+ "<th>Stack trace</th>"+ "</tr>\n");
  for (  QueryDebuggingInfo queryDebuggingInfo : queryDebuggingInfos) {
    SqlQueryDebuggerResultSetData resultSetData=queryDebuggingInfo.getSqlQueryDebuggerResultSetData();
    htmlSB.append("<tr>\n");
    htmlSB.append("<td>");
    htmlSB.append(queryDebuggingInfo.getThreadName());
    htmlSB.append("</td>\n");
    htmlSB.append("<td>");
    htmlSB.append(queryDebuggingInfo.getThreadId());
    htmlSB.append("</td>\n");
    htmlSB.append("<td>");
    htmlSB.append(TIMESTAMP_FORMAT.format(new Date(queryDebuggingInfo.getTimestamp())));
    htmlSB.append("</td>\n");
    htmlSB.append("<td>");
    htmlSB.append(queryDebuggingInfo.getExecutionDuration());
    htmlSB.append("</td>\n");
    htmlSB.append("<td>");
    htmlSB.append(resultSetData == null ? "" : resultSetData.getLifeTime());
    htmlSB.append("</td>\n");
    htmlSB.append("<td>");
    htmlSB.append(resultSetData == null ? "" : resultSetData.getReadCount());
    htmlSB.append("</td>\n");
    htmlSB.append("<td>");
    htmlSB.append(resultSetData == null ? "" : resultSetData.getReadRows());
    htmlSB.append("</td>\n");
    htmlSB.append("<td>");
    String[] queries=queryDebuggingInfo.getQueries();
    for (int i=0; i < queries.length; i++) {
      String query=queries[i];
      if (i > 0) {
        htmlSB.append("\n");
      }
      htmlSB.append(query);
      stringSB.append(query.trim() + LS);
    }
    htmlSB.append("</td>\n");
    htmlSB.append("<td>");
    htmlSB.append(getStackTrace(queryDebuggingInfo));
    htmlSB.append("</td>\n");
    htmlSB.append("</tr>\n");
  }
  htmlSB.append("</table>\n</body>\n</html>");
  Clipboard clipboard=Toolkit.getDefaultToolkit().getSystemClipboard();
  clipboard.setContents(new RichTextTransferable(htmlSB.toString(),stringSB.toString()),null);
}
